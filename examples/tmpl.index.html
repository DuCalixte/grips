{$+ "tmpl.master.html" $}



{$: "#content" |
	userdetails = $.full_name ? "#userdetails" : "#nouser"
}
	<h1>grips Template Engine</h1>

	<p>This is how a grips Template works.</p>
	
	{$/ Here is a template comment block /$}
	
	<p>
	{$% 
		<!-- start of a raw template tag, which disables template parsing inside -->
		Here's how to put in some completely raw $} 
		{$/ unparsed /$} content!
		<!-- here comes the end of the raw tag -->  
	%$}
	</p>

	<hr />
	
	<!-- let's include another template partial -->
	{$= @userdetails $}
{$}



{$: "#userdetails" |
	info = $.info ? "#info" |
	mylinks = $.links.length ? "#links" : "#nolinks"
}
	<div id="userdetails">
		{$= @"#controls" $}
	
		<h3>User Details</h3>

		<p>Welcome back, {$= $.full_name $}!</p>
		
		{$= @info $}
		
		<h3>Your Links</h3>
		
		{$= @mylinks $}
	</div>
{$}



{$: "#controls" |
	which_controls = $.user_id ? "#logout" : "tmpl.other.html#login"
}
	<p>{$= @which_controls $}</p>
{$}



{$: "#info" }
	<h3>Random Info</h3>
	
	<p>{$= $.info $}</p>
{$}



{$: "#logout" }<a class="controls logout" href="#">Logout</a>{$}



{$: "#links" }
	<ul>
	{$/ loop over the "links" array /$}
	{$* $.links |
		item = $$
	}
		<!-- li:{$= $$.key $} -->
		{$= @"#listitem" $}
	{$}
	</ul>
{$}



{$: "#listitem" |
	evenodd = item.even ? "even" : "odd" |
	first = item.first ? "first" |
	last = item.last ? "last"
}
	<li id="link_{$= item.key $}" class="{$= evenodd $} {$= first $} {$= last $}">
		<a href="{$= item.value $}">{$= item.value $}</a>

		{$/ loop over the iteration item (`$$`) object's properties /$}
		<div>item:</div>
		<ul>
		{$* item }
			<li>{$= $$.key $}: {$= $$.value $}</li>
		{$}
		</ul>

	</li>
{$}



{$: "#nouser" }
	{$= @"#controls" $}
{$}



{$: "#nolinks" }
	<p>-no links yet-</p>
{$}



{$: "#footer" }

<script src="grips.js"></script>
<script src="template-bundle.js"></script>
<script>
document.getElementByID("content").innerHTML =
	grips.render("tmpl.index.html#content",{/*...*/});
</script>

{$}



{$: "#styles" }
	{$= @"tmpl.master.html#styles" $}  <!-- Look, template inheritance/polymorphism!! -->
	<link rel="stylesheet" type="text/css" href="index.css" />
{$}

