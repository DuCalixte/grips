<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>grips Templating Engine: Tests</title>
</head>

<body>
<h1>grips Templating Engine: Tests</h1>

<script id="template" type="text/template">
{$: '#foobar' |
	a = $.b ? $.c[d] : e[$.f]["g"]
}
	abc {$= a $}
{$}
</script>

<script id="template_2" type="text/template">
{$: '#foobar' |
	checked['low','high'] = $.foobar ? 'checked'
}
	<input type="radio" name="foobar" class="odd" value="a" {$= checked['low'] $}>
	<input type="radio" name="foobar" class="even" value="b" {$= checked['high'] $}>
{$}
</script>

<script id="template_3" type="text/template">
{$: '#settings' }
	<h1>Settings</h1>
	{$* $.settings |
		name = $$.key |
		setting = $$.value
	}
		<h2>{$= name $}</h2>
		{$* ['low','high'] |
			checked['low','high'] = setting ? 'checked'
		}
			<input type="radio" name="{$= name $}" value="{$= $$.value $}" {$= checked[$$.value] $}> {$= $$.value $}
		{$}
	{$}
{$}
{$: '#baz' }BAZ!{$}
</script>

<script id="template_4" type="text/template">
{$+ '3' $}
{$: '#foobar' | foobar[0..3] = $.blah ? 'yes' : 'no' }
	{$* foobar }
		{$= $$.key $}: {$= $$.value $}
	{$}
{$}
{$: '#baz' }
	{$= @'3#baz' $}!!!!!!!
{$}
</script>

<script id="template_5" type="text/template">
{$+ '4' $}
{$: '#foobar2' }
	Hello World
	{$= @'#baz' $}
	{$= @'#foobar' $}
{$}
</script>

<script src="../lib/base.js"></script>
<script src="../lib/tokenizer.js"></script>
<script src="../lib/parser.js"></script>
<script src="../lib/generator.js"></script>
<script>
var text;

text = document.getElementById("template_3").text;
grips.compileCollection(text,"3");

text = document.getElementById("template_4").text;
grips.compileCollection(text,"4");

text = document.getElementById("template_5").text;
grips.compileCollection(text,"5");

console.log(grips.render("5#foobar2",{blah:2}));

</script>
</body>
</html>