
{$define "#td_source" }
{$loop $.sources }
<p>
   Template Source (<span class="source_collection_id">{$insert~h _.value.collection_id $}</span>):<br>
   <textarea class="tsource" data-collection-id="{$insert~s _.value.collection_id $}" rows="20">{$insert~h _.value.collection_source $}</textarea>
</p>
{$}
<p class="source_error"></p>
{$}



{$define "#td_compiled" }
{$loop $.compiles }
<p>
   grips.compile({ "<span class="compile_collection_id">{$insert~h _.value.collection_id $}</span>": "<span id="compile_source">{$~h}{$insert~s _.value.compile_source $}{$}</span>" });<br>
   <textarea class="tcompiled" rows="20" readonly>{$insert~h _.value.collection_compiled $}</textarea>
</p>
{$}
{$}



{$define "#td_data" }
<p>
   Render Context Data (JSON):<br>
   <textarea rows="20">{$insert~h $.data $}</textarea>
</p>
<p class="data_error"></p>
{$}



{$define "#td_rendered" }
<p>
   grips.render("<span id="render_collection_id">{$insert~h $.collection_id $}</span><span id="render_partial_id">{$insert~h $.partial_id $}</span>", <span id="render_data">{$insert~h $.render_data $}</span>);<br>
   <textarea rows="20" readonly>{$insert~h $.rendered $}</textarea>
</p>
<p class="render_error"></p>
{$}


               {$/ *** Sample templates *** /$}

   {$/ *** Hello World (long-form) *** /$}

{$define "#sample_tmpl_1" }{$raw
{$define "#main" }
   Hello <b>{$insert $.who $}</b>!
{$}
%$}{$}

{$define "#sample_data_1" }
{
   "who": "World"
}
{$}



   {$/ *** Hello World (short-form) *** /$}

{$define "#sample_tmpl_2" }{$raw
{$: "#main" }
   Hello <b>{$= $.who $}</b>!
{$}
%$}{$}

{$define "#sample_data_2" }
{
   "who": "World"
}
{$}



   {$/ *** Template Parsing Error #1 *** /$}

{$define "#sample_tmpl_3" }{$raw
{$define "main" }
   Hello <b>{$insert $.who $}</b>!
{$}
%$}{$}

{$define "#sample_data_3" }{$}



   {$/ *** Template Parsing Error #2 *** /$}

{$define "#sample_tmpl_4" }{$raw
{$define "#main" . }
   Hello <b>{$insert $.who $}</b>!
{$}
%$}{$}

{$define "#sample_data_4" }{$}



   {$/ *** Template Parsing Error #3 *** /$}

{$define "#sample_tmpl_5" }{$raw
{$define "#main" $}
   Hello <b>{$insert $.who $}</b>!
{$}
%$}{$}

{$define "#sample_data_5" }{$}



   {$/ *** Template Parsing Error #4 *** /$}

{$define "#sample_tmpl_6" }{$raw
{$define "#main" }
   Hello <b>{$ insert $.who $}</b>!
{$}
%$}{$}

{$define "#sample_data_6" }{$}



   {$/ *** Template Parsing Error #5 *** /$}

{$define "#sample_tmpl_7" }{$raw
{$define "#main" }
   Hello <b>{$insert $.who $}</b>!
{$}
foo
%$}{$}

{$define "#sample_data_7" }{$}



   {$/ *** Template Parsing Error #6 *** /$}

{$define "#sample_tmpl_8" }{$raw
{$define "#main" }
   Hello <b>{$inser $.who $}</b>!
{$}
%$}{$}

{$define "#sample_data_8" }{$}



   {$/ *** Template Parsing Error #7 *** /$}

{$define "#sample_tmpl_9" }{$raw
{$define "#main" }
   Hello <b>{$insert $.who }</b>!
{$}
%$}{$}

{$define "#sample_data_9" }{$}



   {$/ *** Template Parsing Error #8 *** /$}

{$define "#sample_tmpl_10" }{$raw
{$define "#main" }
   Hello <b>{$insert $.who. $}</b>!
{$}
%$}{$}

{$define "#sample_data_10" }{$}



   {$/ *** Template Rendering Error #1 *** /$}

{$define "#sample_tmpl_11" }{$raw
{$define "#main" }
   Hello <b>{$insert $.who2 $}</b>!
{$}
%$}{$}

{$define "#sample_data_11" }
{
   "who": "World"
}
{$}


   {$/ *** Template Rendering Error #2 *** /$}

{$define "#sample_tmpl_12" }{$raw
{$define "#main" }
   Hello <b>{$insert $.who2.me $}</b>!
{$}
%$}{$}

{$define "#sample_data_12" }
{
   "who": "World"
}
{$}



   {$/ *** Template Rendering Error #3 *** /$}

{$define "#sample_tmpl_13" }{$raw
{$define "#main" |
   who = $.who2[3]
}
   Hello <b>{$insert who $}</b>!
{$}
%$}{$}

{$define "#sample_data_13" }
{
   "who": "World"
}
{$}



   {$/ *** Include Partial Statically *** /$}

{$define "#sample_tmpl_14" }{$raw
{$define "#who" }
   <b>{$insert $.who $}</b>
{$}

{$define "#main" }
   Hello {$partial "#who" $}!
{$}
%$}{$}

{$define "#sample_data_14" }
{
   "who": "World"
}
{$}



   {$/ *** Include Partial Dynamically *** /$}

{$define "#sample_tmpl_15" }{$raw
{$define "#who" }
   <b>{$insert $.who $}</b>
{$}

{$define "#main" |
   who = $.who ? "#who"
}
   Hello {$partial who $}!
{$}
%$}{$}

{$define "#sample_data_15" }
{
   "who": "World"
}
{$}



   {$/ *** Pre-computation Comparisons #1 *** /$}

{$define "#sample_tmpl_16" }{$raw
{$define "#main" |
   checked[0..2] = $.myradio ? "checked"
}
   <input type="radio" name="myradio" value="0" {$insert checked[0] $}> 0
   <input type="radio" name="myradio" value="1" {$insert checked[1] $}> 1
   <input type="radio" name="myradio" value="2" {$insert checked[2] $}> 2
{$}
%$}{$}

{$define "#sample_data_16" }
{
   "myradio": 2
}
{$}



   {$/ *** Pre-computation Comparisons #2 *** /$}

{$define "#sample_tmpl_17" }{$raw

{$comment NOTE: this shows a little "trick" (aka "shortcut") to loop over the pre-computation hash, to avoid having to specify the values range twice. /$}


{$define "#main" |
   options[0..2] = $.myradio ? "checked"
}
   {$loop options }
      <input type="radio" name="myradio" value="{$insert _.key $}" {$insert _.value $}> {$insert _.key $}
   {$}
{$}
%$}{$}

{$define "#sample_data_17" }
{
   "myradio": 2
}
{$}



   {$/ *** Pre-computation Comparisons #3 *** /$}

{$define "#sample_tmpl_18" }{$raw
{$define "#main" }
   <h1>Settings</h1>
   {$loop $.settings |
      name = _.key |
      options["low","high"] = _.value ? "checked"
   }
      <h2>{$insert name $}</h2>
      {$loop options }
         <input type="radio" name="{$insert name $}" value="{$insert _.key $}" {$insert _.value $}> {$insert _.key $}
      {$}
   {$}
{$}
%$}{$}

{$define "#sample_data_18" }
{
    "settings" : {
        "foo" : "low",
        "bar" : "high",
        "baz" : "low"
    }
}
{$}



   {$/ *** Performance Benchmark Snippet #1 *** /$}

{$define "#sample_tmpl_19" }{$raw

{$comment from: http://jsperf.com/grips-performance/3 /$}


{$define '#main' }<div><h1 class='header'>{$insert $.header $}</h1><h2 class='header2'>{$insert $.header2 $}</h2><h3 class='header3'>{$insert $.header3 $}</h3><h4 class='header4'>{$insert $.header4 $}</h4><h5 class='header5'>{$insert $.header5 $}</h5><h6 class='header6'>{$insert $.header6 $}</h6><ul class='list'>{$loop $.list }<li class='item'>{$= _.value $}</li>{$}</ul></div>{$}
%$}{$}

{$define "#sample_data_19" }
{
   "header": "Header",
   "header2": "Header2",
   "header3": "Header3",
   "header4": "Header4",
   "header5": "Header5",
   "header6": "Header6",
   "list": ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10"]
}
{$}



   {$/ *** Looping #1 *** /$}

{$define "#sample_tmpl_20" }{$raw
{$define "#main" }
   <h1>A list of ({$insert $.fruits.length $}) fruits</h1>
   <ul>
      {$loop $.fruits }
         <li>{$insert _.key $}: {$insert _.value $}</li>
      {$}
   </ul>
{$}
%$}{$}

{$define "#sample_data_20" }
{
   "fruits": [
      "Apple",
      "Banana",
      "Orange",
      "Grape"
   ]
}
{$}



   {$/ *** Looping #2 *** /$}

{$define "#sample_tmpl_21" }{$raw
{$define "#main" }
   <h1>A list of fruits</h1>
   <ul>
      {$loop $.fruits }
         <li>{$insert _.key $}: {$insert _.value $}</li>
      {$}
   </ul>
{$}
%$}{$}

{$define "#sample_data_21" }
{
   "fruits": {
      "apple": "Apple",
      "banana": "Banana",
      "orange": "Orange",
      "grape": "Grape"
   }
}
{$}



   {$/ *** Looping #3 *** /$}

{$define "#sample_tmpl_22" }{$raw
{$define "#main" }
   <h1>A list of fruits</h1>
   <ul>
      {$loop $.fruits |
         oddeven = _.odd ? "odd_row" : "even_row" |
         first = _.first ? "first_row" |
         last = _.last ? "last_row"
      }
         <li class="{$insert oddeven $} {$insert first $} {$insert last $}">
            {$insert _.value $}
         </li>
      {$}
   </ul>
{$}
%$}{$}

{$define "#sample_data_22" }
{
   "fruits": [
      "Apple",
      "Banana",
      "Orange",
      "Grape"
   ]
}
{$}



   {$/ *** Looping #4 *** /$}

{$define "#sample_tmpl_23" }{$raw

{$define "#main" }
   <h1>A list of fruits</h1>
   <ul>
      {$loop $.fruits | name = _.value }
         {$partial "#fruit" | _ $}
      {$}
   </ul>
{$}

{$define "#fruit" |
   oddeven = $.odd ? "odd_row" : "even_row" |
   first = $.first ? "first_row" |
   last = $.last ? "last_row"
}
   <li class="{$insert oddeven $} {$insert first $} {$insert last $}">
      {$insert name $}
   </li>
{$}

%$}{$}

{$define "#sample_data_23" }
{
   "fruits": [
      "Apple",
      "Banana",
      "Orange",
      "Grape"
   ]
}
{$}



   {$/ *** Looping #5 *** /$}

{$define "#sample_tmpl_24" }{$raw

{$define "#main" }
   <h1>Grocery Cart</h1>
   <ul>
   {$loop $.grocerycart }
      <li>
         <h2>{$insert _.key $}</h2>
         <ul>
            {$loop _.value | name = _.value }
               {$partial "#produce" | _ $}
            {$}
         </ul>
      </li>
   {$}
   </ul>
{$}

{$define "#produce" |
   oddeven = $.odd ? "odd_row" : "even_row" |
   first = $.first ? "first_row" |
   last = $.last ? "last_row"
}
   <li class="{$insert oddeven $} {$insert first $} {$insert last $}">
      {$insert name $}
   </li>
{$}

%$}{$}

{$define "#sample_data_24" }
{
   "grocerycart": {
      "Fruits": [
         "Apple",
         "Banana",
         "Orange",
         "Grape"
      ],
      "Veggies": [
         "Broccoli",
         "Carrot",
         "Tomato"
      ]
   }
}
{$}



   {$/ *** Looping #6 *** /$}

{$define "#sample_tmpl_25" }{$raw
{$define "#main" }
   <h1>A list of numbers</h1>
   <ul>
      {$loop [3..6] }
         <li>{$insert _.value $}</li>
      {$}
   </ul>
{$}
%$}{$}

{$define "#sample_data_25" }
{}
{$}



   {$/ *** Looping #7 *** /$}

{$define "#sample_tmpl_26" }{$raw
{$define "#main" }
   <h1>A set of strings</h1>
   <ul>
      {$loop ["apple","orange","banana"] }
         <li>{$insert _.value $}</li>
      {$}
   </ul>
{$}
%$}{$}

{$define "#sample_data_26" }
{}
{$}



   {$/ *** Include Partial, Context *** /$}

{$define "#sample_tmpl_27" }{$raw

{$define "#who" }
   <b>{$insert $.name $}</b>
{$}

{$define "#main" }
   Hello {$partial "#who" | $.who $}!
{$}

%$}{$}

{$define "#sample_data_27" }
{
   "who": {
      "name": "World"
   }
}
{$}



   {$/ *** Inheritance #1 *** /$}

{$define "#sample_tmpl_28_a" }{$raw

{$define "#who" }
   <b>{$insert $.name $}</b>
{$}

{$define "#main" }
   Hello {$partial "#who" | $.who $}!
{$}

%$}{$}

{$define "#sample_tmpl_28_b" }{$raw

{$extend "sample_tmpl_28_a" $}

{$define "#who" }
   <b><em>{$insert $.name $}</em></b>
{$}

%$}{$}

{$define "#sample_data_28" }
{
   "who": {
      "name": "World"
   }
}
{$}



   {$/ *** Inheritance #2 *** /$}

{$define "#sample_tmpl_29_a" }{$raw

{$define "#who" }
   <b>{$insert $.name $}</b>
{$}

{$define "#main" }
   Hello {$partial "#who" | $.who $}!
{$}

%$}{$}

{$define "#sample_tmpl_29_b" }{$raw

{$extend "sample_tmpl_29_a" $}

{$define "#main" }
   Hello {$partial "#who" | $.who $}!!!!!
{$}

%$}{$}

{$define "#sample_data_29" }
{
   "who": {
      "name": "World"
   }
}
{$}



   {$/ *** Inheritance #3 *** /$}

{$define "#sample_tmpl_30_a" }{$raw

{$define "#who" }
   <b>{$insert $.name $}</b>
{$}

{$define "#main" }
   Hello {$partial "#who" | $.who $}!
{$}

%$}{$}

{$define "#sample_tmpl_30_b" }{$raw

{$extend "sample_tmpl_30_a" $}

{$define "#main" }
   {$partial "sample_tmpl_30_a#main" $}!!!!
{$}

%$}{$}

{$define "#sample_data_30" }
{
   "who": {
      "name": "World"
   }
}
{$}



   {$/ *** Escaping #1 *** /$}

{$define "#sample_tmpl_31" }{$raw
{$define "#main" }
   Hello <b>{$insert~h $.who $}</b>!
{$}
%$}{$}

{$define "#sample_data_31" }
{
   "who": "{$escape s }World<script>alert("Owned");</script>{$}"
}
{$}



   {$/ *** Escaping #2 *** /$}

{$define "#sample_tmpl_32" }{$raw
{$define "#main" }
   <script>
   var name = "{$insert~s $.who $}";
   alert(name);
   </script>
{$}
%$}{$}

{$define "#sample_data_32" }
{
   "who": "Chad 'Ochocinco' Johnson"
}
{$}



   {$/ *** Escaping #3 *** /$}

{$define "#sample_tmpl_33" }{$raw
{$define "#main" }
   <a href="http://someproxy.net?u={$insert~u $.where $}">Proxied search</a>
{$}
%$}{$}

{$define "#sample_data_33" }
{
   "where": "https://www.google.com/search?q=grips"
}
{$}



   {$/ *** Escaping #4 *** /$}

{$define "#sample_tmpl_34" }{$raw
{$define "#main" }
   Here's some markup:
   <pre>{$escape h }
      <p>
         This is <b>{$insert $.what $}</b>!
      </p>
   {$}</pre>
{$}
%$}{$}

{$define "#sample_data_34" }
{
   "what": "super <em>awesome</em> sauce"
}
{$}



   {$/ *** Misc #1 *** /$}

{$define "#sample_tmpl_35" }{$raw
{$define "#main" |
   foo = $.foo ? "foo" : "bar" |
   baz = $.baz ? "baz"
}
   foo: {$insert foo $}
   baz: {$insert baz $}
{$}

%$}{$}

{$define "#sample_data_35" }
{
   "foo": false,
   "baz": false
}
{$}



   {$/ *** Misc #2 *** /$}

{$define "#sample_tmpl_36" }{$raw
{$define "#main" }
   Sample grips template:
   {$raw 
      foo: {$insert $.foo $}
   \%$}
{$}
%$}{$}

{$define "#sample_data_36" }
{}
{$}



   {$/ *** Misc #3 *** /$}

{$define "#sample_tmpl_37" }{$raw
{$define "#main" }
   If you want to do a template comment in
   grips...

   {$comment this is how you do it. /$}

   Easy, huh?
{$}

{$/ this is a comment too! /$}
%$}{$}

{$define "#sample_data_37" }
{}
{$}



   {$/ *** Misc #4 *** /$}

{$define "#sample_tmpl_38" }{$raw
{$define "#main" | foo = $.foo }
   foo: {$insert foo $}
   {$let foo = "bar" }
      foo: {$insert foo $}
   {$}
   foo: {$insert foo $}
{$}
%$}{$}

{$define "#sample_data_38" }
{
   "foo": "foo"
}
{$}



